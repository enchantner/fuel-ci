<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>1. Fuel-CI Introduction &mdash; fuel-ci 0.0.1a documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0.1a',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="fuel-ci 0.0.1a documentation" href="index.html" />
    <link rel="next" title="2. Flow - definition and guide" href="flow.html" />
    <link rel="prev" title="Welcome to fuel-ci’s documentation!" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="flow.html" title="2. Flow - definition and guide"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to fuel-ci’s documentation!"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">fuel-ci 0.0.1a documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="fuel-ci-introduction">
<span id="intro"></span><h1>1. Fuel-CI Introduction<a class="headerlink" href="#fuel-ci-introduction" title="Permalink to this headline">¶</a></h1>
<p>The main idea of artifact-based build system (even if it can solve many
kinds of tasks) is to build an artifact (which should be thinked of as an
abstract binary file with some metadata) based on its dependencies and
to publish it into some storage to use in future builds. This helps to
avoid rebuilding all parts of the project from the beginning (dependencies
can already be downloaded), simplifying and speeding up the whole building
process.</p>
<p>Building of the code with Fuel-CI includes two phases:</p>
<ul class="simple">
<li>Writing data YAML including objects build system will deal with</li>
<li>Passing created YAML to command line <cite>fci</cite> script</li>
</ul>
<p>Let&#8217;s assume you want to build a Python package from the repo and upload it
as an artifact into some storage for future use. An example of data YAML
can look like this:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">scenario</span><span class="p-Indicator">:</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">build_package</span>

<span class="l-Scalar-Plain">repositories</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">fuel_web</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">url</span><span class="p-Indicator">:</span> <span class="s">&quot;https://github.com/stackforge/fuel-web.git&quot;</span>
    <span class="l-Scalar-Plain">path</span><span class="p-Indicator">:</span> <span class="s">&quot;fuel-web&quot;</span>
    <span class="l-Scalar-Plain">package_path</span><span class="p-Indicator">:</span> <span class="s">&quot;fuel-web/nailgun&quot;</span>

<span class="l-Scalar-Plain">packages</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">robots</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">drivers</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">package</span><span class="p-Indicator">:</span> <span class="s">&quot;python_package&quot;</span>

<span class="l-Scalar-Plain">artifact_storages</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">local_storage</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">drivers</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">storage</span><span class="p-Indicator">:</span> <span class="s">&quot;localfs&quot;</span>
    <span class="l-Scalar-Plain">url</span><span class="p-Indicator">:</span> <span class="s">&quot;test_storage&quot;</span>

<span class="l-Scalar-Plain">build_artifacts</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">nailgun</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">version</span><span class="p-Indicator">:</span> <span class="s">&quot;0.1&quot;</span>
    <span class="l-Scalar-Plain">description</span><span class="p-Indicator">:</span> <span class="s">&quot;Nailgun</span><span class="nv"> </span><span class="s">API</span><span class="nv"> </span><span class="s">service&quot;</span>
    <span class="l-Scalar-Plain">storage</span><span class="p-Indicator">:</span> <span class="s">&quot;local_storage&quot;</span>
    <span class="l-Scalar-Plain">packed</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
</pre></div>
</div>
<p>Let&#8217;s go step by step.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">scenario</span><span class="p-Indicator">:</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">build_package</span>
</pre></div>
</div>
<p>This is a scenario you wish to execute. It is one of the default scenarios (<a class="reference internal" href="scenarios/build_package.html#module-fuel_ci.scenarios.build_package" title="fuel_ci.scenarios.build_package"><tt class="xref py py-meth docutils literal"><span class="pre">fuel_ci.scenarios.build_package()</span></tt></a>) supported bu Fuel-CI. By default <cite>build()</cite> method (or &#8220;stage&#8221;) is executed, but you can specify your own stage to call in specified scenario, like this:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">scenario</span><span class="p-Indicator">:</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">my_module.my_stage</span>
</pre></div>
</div>
<p>After you specified scenario to run, you should describe objects scenario
will be dealing with during building process.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">repositories</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">fuel_web</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">url</span><span class="p-Indicator">:</span> <span class="s">&quot;https://github.com/stackforge/fuel-web.git&quot;</span>
    <span class="l-Scalar-Plain">path</span><span class="p-Indicator">:</span> <span class="s">&quot;fuel-web&quot;</span>
    <span class="l-Scalar-Plain">package_path</span><span class="p-Indicator">:</span> <span class="s">&quot;fuel-web/nailgun&quot;</span>
</pre></div>
</div>
<p>This is a description for a Repository object (<a class="reference internal" href="objects.html#fuel_ci.objects.repo.Repository" title="fuel_ci.objects.repo.Repository"><tt class="xref py py-class docutils literal"><span class="pre">fuel_ci.objects.repo.Repository</span></tt></a>).
<strong>fuel-web</strong> here is an object name to simplify finding it inside
parsed YAML. <strong>url</strong> is an url to repository. By default Git driver
(<a class="reference internal" href="drivers/cvs.html#module-fuel_ci.drivers.cvs.git" title="fuel_ci.drivers.cvs.git"><tt class="xref py py-meth docutils literal"><span class="pre">fuel_ci.drivers.cvs.git()</span></tt></a>) is used, but you can specify any other
driver to use for checking out the repository, if it&#8217;s present e.g.:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">repositories</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">fuel_web</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">drivers</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">cvs</span><span class="p-Indicator">:</span> <span class="s">&quot;svn&quot;</span>
    <span class="l-Scalar-Plain">url</span><span class="p-Indicator">:</span> <span class="s">&quot;svn+ssh://username@hostname/fuel-web&quot;</span>
    <span class="l-Scalar-Plain">path</span><span class="p-Indicator">:</span> <span class="s">&quot;fuel-web&quot;</span>
    <span class="l-Scalar-Plain">package_path</span><span class="p-Indicator">:</span> <span class="s">&quot;fuel-web/nailgun&quot;</span>
</pre></div>
</div>
<p><strong>path</strong> is a local path to checkout repository to, and <strong>package_path</strong> is
an internal path to directory inside cloned repo to use as a working dir
while building package.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">packages</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">fuel-web</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">drivers</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">package</span><span class="p-Indicator">:</span> <span class="s">&quot;python_package&quot;</span>
</pre></div>
</div>
<p>This is a description for a Package object (<a class="reference internal" href="objects.html#fuel_ci.objects.package.Package" title="fuel_ci.objects.package.Package"><tt class="xref py py-class docutils literal"><span class="pre">fuel_ci.objects.package.Package</span></tt></a>).
As you can see, the only thing we&#8217;re doing here is specifying which driver
to use while building package. In this example we&#8217;re dealing with Python
package.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">artifact_storages</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">local_storage</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">drivers</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">storage</span><span class="p-Indicator">:</span> <span class="s">&quot;localfs&quot;</span>
    <span class="l-Scalar-Plain">url</span><span class="p-Indicator">:</span> <span class="s">&quot;test_storage&quot;</span>
</pre></div>
</div>
<p>This is a description for an ArtifactStorage object (<a class="reference internal" href="objects.html#fuel_ci.objects.artifact_storage.ArtifactStorage" title="fuel_ci.objects.artifact_storage.ArtifactStorage"><tt class="xref py py-class docutils literal"><span class="pre">fuel_ci.objects.artifact_storage.ArtifactStorage</span></tt></a>).
In this case it will use &#8220;localfs&#8221; storage driver and <strong>url</strong> points to
some local path where storage keeps its artifacts.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">build_artifacts</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">nailgun</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">version</span><span class="p-Indicator">:</span> <span class="s">&quot;0.1&quot;</span>
    <span class="l-Scalar-Plain">description</span><span class="p-Indicator">:</span> <span class="s">&quot;Nailgun</span><span class="nv"> </span><span class="s">API</span><span class="nv"> </span><span class="s">service&quot;</span>
    <span class="l-Scalar-Plain">storage</span><span class="p-Indicator">:</span> <span class="s">&quot;local_storage&quot;</span>
    <span class="l-Scalar-Plain">packed</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
</pre></div>
</div>
<p>This is a description for an Artifact object (<a class="reference internal" href="objects.html#fuel_ci.objects.artifact.Artifact" title="fuel_ci.objects.artifact.Artifact"><tt class="xref py py-class docutils literal"><span class="pre">fuel_ci.objects.artifact.Artifact</span></tt></a>), which will be built as a result.
We&#8217;re specifying name of the storage to use in a <strong>storage</strong> attribute (by
default first storage in list will be used). Also we specify that artifact
doesn&#8217;t require to be packed (as it will be Python package already represented as &#8220;tar.gz&#8221; archive).</p>
<p>Now you can take a look at <a class="reference internal" href="scenarios/build_package.html#module-fuel_ci.scenarios.build_package" title="fuel_ci.scenarios.build_package"><tt class="xref py py-meth docutils literal"><span class="pre">fuel_ci.scenarios.build_package()</span></tt></a> for
description what will be done with these objects according to chosen
scenario.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Welcome to fuel-ci&#8217;s documentation!</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="flow.html"
                        title="next chapter">2. Flow - definition and guide</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/intro.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="flow.html" title="2. Flow - definition and guide"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to fuel-ci’s documentation!"
             >previous</a> |</li>
        <li><a href="index.html">fuel-ci 0.0.1a documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Nikolay Markov.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>